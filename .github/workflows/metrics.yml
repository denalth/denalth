name: Generate Metrics

on:
  schedule:
    - cron: "0 */6 * * *" # Atualiza a cada 6 horas
  workflow_dispatch:

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: lowlighter/metrics@v3.34
        with:
          # ---------------------------------------------------------
          # üîê TOKEN PRINCIPAL (GitHub)
          # ---------------------------------------------------------
          user: denalth
          token: ${{ secrets.METRICS_TOKEN }}

          # ---------------------------------------------------------
          # üé® TEMPLATE BONITO
          # ---------------------------------------------------------
          template: classic

          # ---------------------------------------------------------
          # ‚öôÔ∏è CONFIGURA√á√ïES GERAIS
          # ---------------------------------------------------------
          base: header, activity, repositories, #community, metadata
          config_timezone: America/Fortaleza
          config_twemoji: no
          config_animations: no
          config_display: large
          config_padding: 8, 12

          # ---------------------------------------------------------
          # üî• PLUGINS AVAN√áADOS
          # ---------------------------------------------------------

          plugin_languages: yes
          plugin_languages_ignored: html, css
          plugin_languages_details: percentage
          plugin_languages_limit: 12

          plugin_achievements: yes
          plugin_achievements_threshold: C
          plugin_achievements_display: compact
          plugin_achievements_secrets: yes

          plugin_activity: no
          plugin_activity_limit: 10
          plugin_activity_days: 14
          plugin_activity_filter: all

          plugin_followup: no
          plugin_followup_sections: repositories

          plugin_lines: no

          plugin_repositories: no
          plugin_repositories_featured: denalth/denalth

          plugin_stars: no
          plugin_stars_limit: 5

          # üìÖ Calend√°rio trimestral
          plugin_isocalendar: yes
          plugin_isocalendar_duration: quarter

          plugin_habits: no
          plugin_habits_facts: no
          plugin_habits_charts: no

          plugin_calendar: no

          plugin_code: no

          # ---------------------------------------------------------
          # üåê PLUGINS EXTERNOS
          # ---------------------------------------------------------

          # üéß SPOTIFY ‚Äî requer client ID e secret
          plugin_music: no
          plugin_music_provider: spotify
          plugin_music_mode: recent
          plugin_music_limit: 5
          #plugin_music_token: ${{ secrets.24e3e463da904d67b9d0ef5d0a969a32 }}|${{ secrests.1814094260bc493bafacc53a69da6d08 }}

          # ‚ñ∂Ô∏è YOUTUBE via RSS
          plugin_rss: no
          plugin_rss_source: https://www.youtube.com/feeds/videos.xml?channel_id=SEU_CHANNEL_ID
          plugin_rss_limit: 5

          # ---------------------------------------------------------
          # üìÑ ARQUIVO DE SA√çDA
          # ---------------------------------------------------------
          filename: metrics.svg
